# DeepSeek 模型使用说明

## 📌 DeepSeek 模型选项

项目现已支持 DeepSeek（深度求索）的两个主要模型：

### 1. **DeepSeek V3** (推荐)
- 模型名称：`deepseek-chat`
- 特点：高性能、经济实惠
- 适用场景：日常分镜生成、剧本分析
- 支持 JSON 输出模式

### 2. **DeepSeek R1** (推理模型)
- 模型名称：`deepseek-reasoner`
- 特点：强大的推理能力，适合复杂逻辑分析
- 适用场景：复杂剧情分析、深度剧本理解
- 注意：R1 模型不支持 JSON 模式，系统会自动处理

## 🔧 API 配置方式

### 方式一：使用 DeepSeek 官方 API（推荐）

1. **获取 API Key**
   - 访问 [DeepSeek 开放平台](https://platform.deepseek.com/)
   - 注册账号并创建 API Key

2. **配置界面设置**
   - 在页面顶部找到配置区域
   - **API Key**：输入你的 DeepSeek API Key
   - **模型选择**：选择 `DeepSeek V3` 或 `DeepSeek R1`
   - **API 服务器**：选择 `DeepSeek 官方 API`

### 方式二：使用第三方代理 API

1. **配置界面设置**
   - **API Key**：输入第三方服务商提供的 API Key
   - **模型选择**：选择 `DeepSeek V3` 或 `DeepSeek R1`
   - **API 服务器**：选择 `代理 (第三方API)`

## 💰 费用说明

DeepSeek 模型定价非常实惠：

- **DeepSeek V3**
  - 输入：¥0.0005 / 1K tokens
  - 输出：¥0.002 / 1K tokens

- **DeepSeek R1**
  - 输入：¥0.001 / 1K tokens
  - 输出：¥0.004 / 1K tokens

相比其他模型，DeepSeek 在保证质量的同时大幅降低成本。

## ⚙️ 性能优化

项目已针对 DeepSeek 进行优化：

### 1. **大容量上下文**
- 支持最多 50 万字符的剧本输入
- 充分利用 DeepSeek 的长文本处理能力

### 2. **超长超时时间**
- 单次请求最长 15 分钟超时
- 支持生成 50+ 个分镜

### 3. **智能分段生成**
- 超过 50 个分镜自动启用分段模式
- 每批次可生成 30-50 个分镜
- 确保剧情顺序和连贯性

### 4. **JSON 格式优化**
- V3 模型使用原生 JSON 模式
- R1 模型自动清理推理过程（`<think>` 标签）
- 智能提取有效 JSON 内容

## 🚀 使用建议

### 推荐配置

1. **小型项目（10-30 个分镜）**
   - 模型：DeepSeek V3
   - 一次性生成，速度快，成本低

2. **中型项目（30-50 个分镜）**
   - 模型：DeepSeek V3 或 R1
   - 一次性生成或少量分段

3. **大型项目（50+ 个分镜）**
   - 模型：DeepSeek V3（经济性更好）
   - 自动分段生成，每批 30-50 个

### 质量提升建议

- 使用 **DeepSeek R1** 进行剧本深度分析（第一步）
- 使用 **DeepSeek V3** 进行资产提取和分镜生成（后续步骤）
- 充分利用"深度研读"功能，提供更准确的剧情理解

## ⚠️ 注意事项

1. **网络连接**
   - 官方 API 需要稳定的网络连接
   - 如遇超时，可尝试使用代理 API

2. **JSON 格式**
   - R1 模型可能返回推理过程，系统会自动清理
   - 如遇解析错误，请查看浏览器控制台（F12）的调试信息

3. **分镜数量**
   - 建议单批次不超过 50 个分镜
   - 大型项目会自动启用分段模式

## 📞 技术支持

如遇问题，请：
1. 打开浏览器控制台（F12）查看详细日志
2. 检查 API Key 是否正确
3. 确认 API 服务器地址设置正确
4. 查看错误提示信息

---

**更新日期**: 2026-02-07
**版本**: v1.0
