# 管理员账户信息备份

## 管理员账户

**创建时间**: 2026-02-12

### 账户信息

| 项目 | 信息 |
|------|------|
| 用户名 | hjl |
| 密码 | hjl123456 |
| 邮箱 | hjl@example.com |
| 全名 | 黄金龙 |
| 权限 | 管理员 |
| 用户ID | 2 |

---

## 访问方式

### 管理后台登录

1. **登录地址**: http://localhost:5000/admin-login.html
2. **输入用户名**: hjl
3. **输入密码**: hjl123456
4. **点击登录**

登录成功后会自动跳转到管理后台主页面。

### 管理后台主页

- **地址**: http://localhost:5000/admin.html
- **说明**: 登录后自动跳转，也可以直接访问（需要先登录）

---

## 管理后台功能

### 1. 系统统计

管理后台首页显示系统整体统计信息：

- **总用户数**: 系统中所有注册用户数量
- **活跃用户**: 当前处于活跃状态的用户数量
- **管理员**: 拥有管理员权限的用户数量
- **项目总数**: 系统中所有项目数量
- **剧集总数**: 所有项目的剧集总数
- **分镜总数**: 所有项目的分镜总数

### 2. 用户管理

#### 用户列表

- **查看所有用户**: 分页显示所有注册用户
- **搜索功能**: 支持按用户名、邮箱、全名搜索
- **分页浏览**: 每页显示20条记录

#### 用户信息显示

每个用户显示以下信息：
- 用户ID
- 用户名
- 邮箱
- 全名
- 角色（管理员/普通用户）
- 状态（活跃/禁用）
- 创建时间

#### 用户操作

##### 编辑用户
- 修改用户名
- 修改邮箱
- 修改全名
- 重置密码
- 设置/取消管理员权限

##### 启用/禁用用户
- **禁用用户**: 禁用后用户无法登录系统
- **启用用户**: 恢复用户的登录权限
- **注意**: 不能禁用自己的账户

##### 删除用户
- **永久删除**: 删除用户及其所有项目数据
- **注意**:
  - 此操作不可恢复
  - 不能删除自己的账户
  - 删除前会弹出确认对话框

### 3. 刷新功能

点击"刷新"按钮可以重新加载：
- 系统统计信息
- 用户列表数据

---

## API接口说明

管理后台使用以下API接口：

### 认证接口

- **POST /api/auth/login**: 用户登录
- **Token验证**: 所有管理接口需要在请求头中携带 `Authorization: Bearer <token>`

### 管理接口

| 接口 | 方法 | 说明 |
|------|------|------|
| /api/admin/statistics | GET | 获取系统统计信息 |
| /api/admin/users | GET | 获取用户列表（支持分页和搜索） |
| /api/admin/users/:id | GET | 获取用户详情 |
| /api/admin/users/:id | PUT | 更新用户信息 |
| /api/admin/users/:id/status | PUT | 启用/禁用用户 |
| /api/admin/users/:id | DELETE | 删除用户 |

---

## 安全注意事项

### 密码安全

1. **定期更换密码**: 建议每3个月更换一次管理员密码
2. **密码强度**: 使用至少8位字符，包含字母和数字
3. **不要共享**: 不要将管理员账户分享给他人

### 权限管理

1. **谨慎授予管理员权限**: 只给需要的人授予管理员权限
2. **定期审查**: 定期检查管理员列表，移除不需要的管理员权限
3. **操作记录**: 重要操作前请确认，删除操作不可恢复

### 数据安全

1. **定期备份**: 定期备份数据库文件 `backend/storage/projects/default.db`
2. **访问控制**: 确保只有授权人员可以访问服务器
3. **日志监控**: 定期检查系统日志，发现异常及时处理

---

## 常见问题

### Q1: 忘记管理员密码怎么办？

**解决方法**:
1. 使用 `backend/create_admin.py` 脚本重置密码
2. 或者运行 `python backend/create_admin_hjl.py` 重新创建账户

### Q2: 如何创建新的管理员账户？

**方法1**: 通过管理后台
1. 登录管理后台
2. 找到要升级的用户
3. 点击"编辑"
4. 勾选"管理员权限"
5. 保存

**方法2**: 使用命令行
```bash
cd backend
python create_admin.py
```

### Q3: 如何查看所有管理员？

**方法1**: 通过管理后台
- 登录后在用户列表中筛选"管理员"角色

**方法2**: 使用命令行
```bash
cd backend
python create_admin.py --list
```

### Q4: 管理后台无法访问？

**检查步骤**:
1. 确认Flask应用正在运行
2. 检查访问地址是否正确: http://localhost:5000/admin-login.html
3. 清除浏览器缓存并刷新（Ctrl+Shift+R）
4. 检查浏览器控制台是否有错误信息

### Q5: 登录后提示"需要管理员权限"？

**原因**: 该账户不是管理员账户

**解决方法**:
1. 使用管理员账户登录
2. 或者让现有管理员给你的账户授予管理员权限

---

## 启动服务

### 启动Flask后端

```bash
cd "E:\AI coding\AI剧本批量拆解版本1\backend"
python app.py
```

服务启动后会显示：
```
* Running on http://127.0.0.1:5000
* Running on http://192.168.31.94:5000
```

### 访问管理后台

在浏览器中打开: http://localhost:5000/admin-login.html

---

## 技术架构

### 后端技术栈

- **框架**: Flask
- **数据库**: SQLite
- **认证**: JWT Token
- **密码加密**: Werkzeug Security

### 前端技术栈

- **纯HTML/CSS/JavaScript**: 无需额外依赖
- **样式**: 原生CSS，响应式设计
- **交互**: 原生JavaScript，Fetch API

### 数据库结构

#### users 表

| 字段 | 类型 | 说明 |
|------|------|------|
| id | INTEGER | 主键 |
| username | TEXT | 用户名（唯一） |
| email | TEXT | 邮箱（唯一） |
| password_hash | TEXT | 密码哈希 |
| full_name | TEXT | 全名 |
| is_admin | BOOLEAN | 是否为管理员 |
| is_active | BOOLEAN | 是否活跃 |
| created_at | TIMESTAMP | 创建时间 |
| updated_at | TIMESTAMP | 更新时间 |

---

## 维护建议

### 日常维护

1. **每日检查**: 查看系统统计，确认用户活动正常
2. **每周审查**: 检查新注册用户，清理异常账户
3. **每月备份**: 备份数据库文件和配置文件

### 数据库备份

```bash
# 备份数据库
cp "E:\AI coding\AI剧本批量拆解版本1\backend\storage\projects\default.db" "backup_$(date +%Y%m%d).db"
```

### 日志查看

Flask应用的日志会输出到控制台，包括：
- 请求日志
- 错误日志
- 调试信息

---

## 联系方式

如有问题，请联系系统管理员。

---

**文档版本**: 1.0
**最后更新**: 2026-02-12
**创建人**: AI Assistant
